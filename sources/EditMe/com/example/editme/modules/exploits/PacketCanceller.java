package com.example.editme.modules.exploits;

import com.example.editme.events.PacketEvent;
import com.example.editme.modules.Module;
import com.example.editme.settings.Setting;
import com.example.editme.util.setting.SettingsManager;
import java.util.function.Predicate;
import me.zero.alpine.listener.EventHandler;
import me.zero.alpine.listener.Listener;
import net.minecraft.network.play.client.CPacketEntityAction;
import net.minecraft.network.play.client.CPacketInput;
import net.minecraft.network.play.client.CPacketPlayer;
import net.minecraft.network.play.client.CPacketUseEntity;
import net.minecraft.network.play.client.CPacketVehicleMove;

@Module.Info(
   name = "PacketCanceller",
   description = "Cancels packets",
   category = Module.Category.EXPLOITS
)
public class PacketCanceller extends Module {
   private Setting all = this.register(SettingsManager.b("Cancel All", false));
   private int numPackets;
   private Setting packetInput = this.register(SettingsManager.booleanBuilder("CPacketInput").withValue(true).withVisibility(this::lambda$new$0));
   @EventHandler
   private final Listener sendListener = new Listener(this::lambda$new$5, new Predicate[0]);
   private Setting packetVehicleMove = this.register(SettingsManager.booleanBuilder("CPacketVehicleMove").withValue(true).withVisibility(this::lambda$new$4));
   private Setting packetPlayer = this.register(SettingsManager.booleanBuilder("CPacketPlayer").withValue(true).withVisibility(this::lambda$new$1));
   private Setting packetEntityAction = this.register(SettingsManager.booleanBuilder("CPacketEntityAction").withValue(true).withVisibility(this::lambda$new$2));
   private Setting packetUseEntity = this.register(SettingsManager.booleanBuilder("CPacketUseEntity").withValue(true).withVisibility(this::lambda$new$3));

   private void lambda$new$5(PacketEvent.Send var1) {
      if ((Boolean)this.all.getValue() || (Boolean)this.packetInput.getValue() && var1.getPacket() instanceof CPacketInput || (Boolean)this.packetPlayer.getValue() && var1.getPacket() instanceof CPacketPlayer || (Boolean)this.packetEntityAction.getValue() && var1.getPacket() instanceof CPacketEntityAction || (Boolean)this.packetUseEntity.getValue() && var1.getPacket() instanceof CPacketUseEntity || (Boolean)this.packetVehicleMove.getValue() && var1.getPacket() instanceof CPacketVehicleMove) {
         var1.cancel();
         ++this.numPackets;
      }

   }

   private boolean lambda$new$4(Boolean var1) {
      return !(Boolean)this.all.getValue();
   }

   private boolean lambda$new$1(Boolean var1) {
      return !(Boolean)this.all.getValue();
   }

   public String getHudInfo() {
      return Integer.toString(this.numPackets);
   }

   private boolean lambda$new$0(Boolean var1) {
      return !(Boolean)this.all.getValue();
   }

   private boolean lambda$new$3(Boolean var1) {
      return !(Boolean)this.all.getValue();
   }

   public void onDisable() {
      this.numPackets = 0;
   }

   private boolean lambda$new$2(Boolean var1) {
      return !(Boolean)this.all.getValue();
   }
}
