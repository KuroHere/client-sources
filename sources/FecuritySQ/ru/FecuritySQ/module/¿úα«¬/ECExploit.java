package ru.FecuritySQ.module.игрок;

import net.minecraft.client.gui.screen.inventory.ChestScreen;
import net.minecraft.client.gui.screen.inventory.ContainerScreen;
import net.minecraft.client.util.InputMappings;
import net.minecraft.network.play.client.CCloseWindowPacket;
import net.minecraft.network.play.server.SCloseWindowPacket;
import org.lwjgl.glfw.GLFW;
import ru.FecuritySQ.event.Event;
import ru.FecuritySQ.event.imp.EventPacket;
import ru.FecuritySQ.event.imp.EventUpdate;
import ru.FecuritySQ.module.Module;

public class ECExploit extends Module {
    private ContainerScreen container;

    public ECExploit() {
        super(Category.Игрок, GLFW.GLFW_KEY_0);
    }

    @Override
    public void event(Event e) {
        if(!isEnabled()) return;
        if(e instanceof EventUpdate){
            if (mc.currentScreen instanceof ChestScreen) container = (ContainerScreen) mc.currentScreen;
            if (InputMappings.isKeyDown(mc.getMainWindow().getHandle(), GLFW.GLFW_KEY_INSERT) && container != null)  mc.displayGuiScreen(container);
        }
        if(e instanceof EventPacket eventPacket){
            if (eventPacket.packet instanceof CCloseWindowPacket) e.cancel = true;
            if (eventPacket.packet instanceof SCloseWindowPacket) container = null;
        }
    }
}
