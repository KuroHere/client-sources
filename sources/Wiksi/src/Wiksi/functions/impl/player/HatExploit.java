package src.Wiksi.functions.impl.player;

import com.google.common.eventbus.Subscribe;
import src.Wiksi.events.EventUpdate;
import src.Wiksi.functions.api.Category;
import src.Wiksi.functions.api.Function;
import src.Wiksi.functions.api.FunctionRegister;
import net.minecraft.client.Minecraft;
import net.minecraft.client.entity.player.ClientPlayerEntity;
import net.minecraft.inventory.container.ClickType;
import net.minecraft.inventory.container.Container;
import net.minecraft.inventory.container.PlayerContainer;
import net.minecraft.item.ItemStack;

@FunctionRegister(name = "HatExploit", type = Category.Player)
public class HatExploit extends Function {
    public HatExploit() {
    }

    @Subscribe
    public void onUpdate(EventUpdate var1) {
        this.moveItemToHead();
    }

    private void moveItemToHead() {
        Minecraft mc = Minecraft.getInstance();
        ClientPlayerEntity entity = mc.player;
        if (entity != null) {
            ItemStack item = entity.getHeldItemMainhand();
            if (!item.isEmpty()) {
                Container open = entity.openContainer;
                if (open == null || !(open instanceof PlayerContainer)) {
                    return;
                }

                int inv1 = 39;
                int inv = 36 + entity.inventory.currentItem;
                mc.playerController.windowClick(open.windowId, inv, inv1, ClickType.SWAP, entity);
                print("Установили предмет на голову!");
                toggle();
            }

        }
    }
}
